# 图数据挖掘可视化系统-接口文档 V2.0

## 用户系统部分

### /login_register

中文：

登录注册页面

- 提交方法：GET
- 参数：无
- 返回值：登陆界面的html网页文件



### /api-register-verify

中文：

检查用户注册是否有重复，返回状态值

- 提交方法：POST
- 参数：

username：用户名，字符串形式

- 返回值：

字符串，`success`或`fault`

`fault`代表有重复，不能进行注册；`success`代表无重复，可进行下一步注册填写信息操作



### /api-interest-given

中文：

随机返回十个研究兴趣供用户选择研究兴趣时用

- 提交方法：GET
- 返回值：

10个研究兴趣，如`['计算机','大数据','自动化'...] `



### /api-register-data

中文：

接受用户提交的注册信息，存入数据库中

- 提交方法：POST
- 参数：

**data：一个字典，包括username，pwd**

例如：

```
data = {'username': admin, 'pwd':'123456789'}
```



- 返回值：

注册成功，返回`success`；注册失败，返回`fault`



### /api-login

中文：

登录接口，接受用户填写的用户名和密码

- 提交方法：POST
- 参数：

`form`：提交的表单

表单数据中各项参数为`username`，`pwd`

- 返回值：

如果登陆成功，则返回token；

用户名或密码错误，则返回空字符串`''`



### /api-login-verify

中文：

登陆状态验证接口

- 提交方法：POST
- 参数：

`token`：登录状态验证的一个字符串

`username`：用户名

- 返回值：

如果已登录，返回用户数据，形如`{'username': 'pz','interest': ['计算机','视觉'], 'age': 26, 'workplace': '北京大学'}`

如果未登录，返回空字典。如`{}`



### /api-ChangeInfo

中文：

在数据库中修改用户信息

- 提交方法：POST
- 参数：

`form`：提交的表单数据

包含`username`，`pwd`，`interest`，`age`，`workplace`

- 返回值：

修改成功，返回字符串`success`；修改失败，返回`fault`



## 主页面

`/`即为主页面



### /api-shown_nodes-data

中文：

主页面图中各结点的数据

- 提交方法：GET
- 返回值：一个列表，每个元素是每个节点的各项数据，其中包括

`id`：int型

`connections`：与该id有联系的结点列表，每个元素为int型

`class`：根据结点边数多少的分类，字符串，**默认`class1`最大**

形如5

```
[{"id": 7758, "connection": [656, 596, 114, 36], "class": "class1"}, {"id": 3034, "connection": [5757, 999, 10000], "class": "class3"}]
```



### /api-id-data

中文：

获取一个结点的各项数据

- 提交方法：POST
- 参数：

`id`：节点的id

- 返回值：

一个字典，包含两项数据，研究方向，该结点的邻居数

形如：

```
{"interest": ["电气", "自动化", "计算机", "视觉"], "neighbour": 50}
```

---

下面的api用于可视化图

### /overview-data

中文：

获取总体概览情况

- 提交方法：GET
- 返回值：图的各项属性：图的总节点数（int值），总边数（int值），网络密度（float值），联通分支数（int值）

形如：

```
{'node_num': 10755, 'edge_num': 588, 'net_density': 505.6216, 'connected_component': 100}
```



### /hot_domain

中文：

热门研究领域的统计数据，用于绘制柱状图

- 提交方法：GET
- 返回值：一个字典，每个元素为热门领域以及研究学者数，共有10个热门领域

形如

```
{"计算机": 888, “软件工程”: 555, "自动化": 333, ...}
```



### /excellent_school

中文：

高校学者数的统计数据，用于绘制饼状图

- 提交方法：GET
- 返回值：一个字典，共有10个高校，对应的数据分别为该校学者数和比例

形如

```
{"北京大学": [505, 0.35], "清华大学": [396, 0.27], "中国人民大学": [202, 0.20], ...}
```





### /excellent_scholar

中文：

重要学者的影响因子的统计数据，用于绘制气泡图

- 提交方法：GET
- 返回值：一个字典，共有10个学者，三项数据分别对应pagerank值（10的-4次方），邻居数，比例

形如

```
{"3237": [25.733, 1013, 0.1108], "7549": [17.126, 694, 0.0759], 
```



## 个人页

`<postID>`**表示postID是一个变量**



### `/<postID>/page`

中文：

进入个人页

- 提交方法：GET
- 参数：

postID：节点ID

- 返回值：根据不同的postID参数值显示不同节点的个人页html文件

即`/666/page`则进入了节点666的个人页，下同理



### `/<postID>/root-data`

中文：

获取根节点的数据

- 提交方法：GET
- 参数：

`postID`：节点的id

- 返回值：失败则返回空字典`{}`，成功则返回根节点的数据

形如

```
{"id": 5,"interest": ['计算机', '大数据安全', ...], "ori-connection": [5, 999, 3235, ...], "predict-connection": [888, 5599, 8848], "ori-num": 50, "predict-num": 6}
```



### `/<postID>/ori-connections`

中文：

根节点已有的联系结点及其相关的研究兴趣

- 提交方法：GET
- 参数：

`postID`：节点的id

- 返回值：成功则返回一个字典，失败则返回一个空字典

形如

```
{5: ['计算机', '大数据安全', ...], 999: ['自动化', '大数据安全'], ...}
```



### `/<postID>/predict-connections`

中文：

预测出可能与根节点有关系的节点

- 提交方法：GET
- 参数： 

`postID`：节点的id

- 返回值：成功则返回一个字典，失败则返回一个空字典

形式同`/postID/ori-connections`

